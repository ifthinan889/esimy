# Admin Panel .htaccess
RewriteEngine On

# Security headers for admin
<IfModule mod_headers.c>
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header always set Pragma "no-cache"
</IfModule>

# MIME types - CRITICAL FOR ADMIN ASSETS
<IfModule mod_mime.c>
    AddType text/css .css
    AddType application/javascript .js
    AddType image/png .png
    AddType image/jpeg .jpg
    AddType image/gif .gif
    AddType application/json .json
</IfModule>

# Enable compression for admin assets
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/html
</IfModule>

# Cache control for admin assets
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 hour"
    ExpiresByType application/javascript "access plus 1 hour"
    ExpiresByType image/png "access plus 1 day"
    ExpiresByType image/jpeg "access plus 1 day"
</IfModule>

# Handle existing files first (CRITICAL!)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Security: Block access to sensitive files
<Files "*.log">
    Require all denied
</Files>

<Files "*.sql">
    Require all denied
</Files>

<Files "*.bak">
    Require all denied
</Files>

<Files "*.env">
    Require all denied
</Files>

# Allow access to admin PHP files
<FilesMatch "\.php$">
    <RequireAll>
        Require all granted
    </RequireAll>
</FilesMatch>